(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var l in a)e.o(a,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:a[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.i18n,a=window.wp.hooks,l=window.wp.compose,r=window.wp.blockEditor,i=window.wp.components,n=window.wp.element,o=window.wp.apiFetch;var s=e.n(o);const c=window.ReactJSXRuntime;(0,a.addFilter)("blocks.registerBlockType","occ/rather-simple-polylang-free-extras",function(e,t){return["core/widget-area","core/legacy-widget","occ/rather-simple-polylang-language-switcher"].includes(t)?e:{...e,attributes:{...e.attributes,languageVisibility:{type:"string",default:""}}}});const d=(0,l.createHigherOrderComponent)(e=>a=>{if(["core/widget-area","core/legacy-widget","occ/rather-simple-polylang-language-switcher"].includes(a.name))return(0,c.jsx)(e,{...a});const{attributes:l,setAttributes:o}=a,[d,g]=(0,n.useState)([]),[p,u]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{s()({path:"/pll/v1/languages"}).then(e=>{const t=e.map(e=>({label:e.name,value:e.slug}));g(t),u(!1)}).catch(()=>{u(!1)})},[]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e,{...a},"edit"),a.isSelected&&(0,c.jsx)(r.InspectorControls,{children:(0,c.jsx)(i.PanelBody,{title:(0,t.__)("Block visibility by language","rather-simple-polylang-free-extras"),children:p?(0,c.jsx)(i.Spinner,{}):(0,c.jsx)(i.SelectControl,{label:(0,t.__)("This block is displayed for:","rather-simple-polylang-free-extras"),value:l.languageVisibility,options:[{label:(0,t.__)("All languages","rather-simple-polylang-free-extras"),value:""},...d],onChange:e=>{o({languageVisibility:""===e?void 0:e})}})})})]})},"addLanguageSelectControl");(0,a.addFilter)("editor.BlockEdit","occ/rather-simple-polylang-free-extras",d)})();
(()=>{"use strict";var e={n:t=>{var l=t&&t.__esModule?()=>t.default:()=>t;return e.d(l,{a:l}),l},d:(t,l)=>{for(var a in l)e.o(l,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:l[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.i18n,l=window.wp.hooks,a=window.wp.compose,n=window.wp.blockEditor,i=window.wp.components,o=window.wp.element,r=window.wp.apiFetch;var c=e.n(r);const s=window.wp.primitives,d=window.ReactJSXRuntime;var p=(0,d.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,d.jsx)(s.Path,{d:"M17.5 10h-1.7l-3.7 10.5h1.7l.9-2.6h3.9l.9 2.6h1.7L17.5 10zm-2.2 6.3 1.4-4 1.4 4h-2.8zm-4.8-3.8c1.6-1.8 2.9-3.6 3.7-5.7H16V5.2h-5.8V3H8.8v2.2H3v1.5h9.6c-.7 1.6-1.8 3.1-3.1 4.6C8.6 10.2 7.8 9 7.2 8H5.6c.6 1.4 1.7 2.9 2.9 4.4l-2.4 2.4c-.3.4-.7.8-1.1 1.2l1 1 1.2-1.2c.8-.8 1.6-1.5 2.3-2.3.8.9 1.7 1.7 2.5 2.5l.6-1.5c-.7-.6-1.4-1.3-2.1-2z"})});(0,l.addFilter)("blocks.registerBlockType","occ/rather-simple-polylang-free-extras",function(e,t){return["core/widget-area","core/legacy-widget","occ/rather-simple-polylang-language-switcher"].includes(t)?e:{...e,attributes:{...e.attributes,pll_lang:{type:"string",default:""}}}});const g=(0,a.createHigherOrderComponent)(e=>l=>{if(["core/widget-area","core/legacy-widget","occ/rather-simple-polylang-language-switcher"].includes(l.name))return(0,d.jsx)(e,{...l});const{attributes:a,setAttributes:r}=l,[s,g]=(0,o.useState)([]),[w,u]=(0,o.useState)(!0);(0,o.useEffect)(()=>{c()({path:"/pll/v1/languages"}).then(e=>{const t=e.map(e=>({label:e.name,value:e.slug,flag:e.flag_url}));g(t),u(!1)}).catch(()=>{u(!1)})},[]);const h=s.find(e=>e.value===a.pll_lang);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(e,{...l},"edit"),l.isSelected&&(0,d.jsx)(n.BlockControls,{group:"other",children:w?(0,d.jsx)("div",{style:{padding:"0 8px"},children:(0,d.jsx)(i.Spinner,{})}):(0,d.jsx)(i.ToolbarDropdownMenu,{icon:h?.flag?(0,d.jsx)("img",{src:h.flag,alt:h.label,style:{width:"23px",height:"auto",padding:"2px",objectFit:"cover"}}):p,label:(0,t.__)("Select Language","text-domain"),controls:[{title:(0,t.__)("All Languages","text-domain"),icon:p,onClick:()=>r({pll_lang:void 0}),isActive:!a.pll_lang},...s.map(e=>({title:e.label,icon:(0,d.jsx)("img",{src:e.flag,alt:e.label,style:{width:"23px",height:"auto",padding:"2px",display:"block"}}),onClick:()=>r({pll_lang:e.value}),isActive:a.pll_lang===e.value}))]})})]})},"addLanguageSelectControl");(0,l.addFilter)("editor.BlockEdit","occ/rather-simple-polylang-free-extras",g)})();
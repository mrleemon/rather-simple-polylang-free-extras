(()=>{"use strict";var e={n:t=>{var l=t&&t.__esModule?()=>t.default:()=>t;return e.d(l,{a:l}),l},d:(t,l)=>{for(var r in l)e.o(l,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:l[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.i18n,l=window.wp.hooks,r=window.wp.compose,a=window.wp.blockEditor,n=window.wp.components,o=window.wp.element,i=window.wp.apiFetch;var s=e.n(i);const c=window.ReactJSXRuntime;(0,l.addFilter)("blocks.registerBlockType","occ/rather-simple-polylang-free-extras",function(e,t){return["core/widget-area","core/legacy-widget","occ/rather-simple-polylang-language-switcher"].includes(t)?e:{...e,attributes:{...e.attributes,pll_lang:{type:"string",default:""}}}});const p=(0,r.createHigherOrderComponent)(e=>l=>{if(["core/widget-area","core/legacy-widget","occ/rather-simple-polylang-language-switcher"].includes(l.name))return(0,c.jsx)(e,{...l});const{attributes:r,setAttributes:i}=l,[p,d]=(0,o.useState)([]),[g,u]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{s()({path:"/pll/v1/languages"}).then(e=>{const t=e.map(e=>({label:e.name,value:e.slug}));d(t),u(!1)}).catch(()=>{u(!1)})},[]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e,{...l},"edit"),l.isSelected&&(0,c.jsx)(a.InspectorControls,{children:(0,c.jsx)(n.PanelBody,{title:(0,t.__)("Block visibility by language","rather-simple-polylang-free-extras"),children:g?(0,c.jsx)(n.Spinner,{}):(0,c.jsx)(n.SelectControl,{label:(0,t.__)("This block is displayed for:","rather-simple-polylang-free-extras"),value:r.pll_lang,options:[{label:(0,t.__)("All languages","rather-simple-polylang-free-extras"),value:""},...p],onChange:e=>{i({pll_lang:""===e?void 0:e})}})})})]})},"addLanguageSelectControl");(0,l.addFilter)("editor.BlockEdit","occ/rather-simple-polylang-free-extras",p)})();
(()=>{"use strict";var e={n:l=>{var t=l&&l.__esModule?()=>l.default:()=>l;return e.d(t,{a:t}),t},d:(l,t)=>{for(var a in t)e.o(t,a)&&!e.o(l,a)&&Object.defineProperty(l,a,{enumerable:!0,get:t[a]})},o:(e,l)=>Object.prototype.hasOwnProperty.call(e,l)};const l=window.wp.i18n,t=window.wp.hooks,a=window.wp.compose,r=window.wp.blockEditor,o=window.wp.components,n=window.wp.element,i=window.wp.apiFetch;var c=e.n(i);const s=window.wp.primitives,p=window.ReactJSXRuntime;var g=(0,p.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(s.Path,{d:"M17.5 10h-1.7l-3.7 10.5h1.7l.9-2.6h3.9l.9 2.6h1.7L17.5 10zm-2.2 6.3 1.4-4 1.4 4h-2.8zm-4.8-3.8c1.6-1.8 2.9-3.6 3.7-5.7H16V5.2h-5.8V3H8.8v2.2H3v1.5h9.6c-.7 1.6-1.8 3.1-3.1 4.6C8.6 10.2 7.8 9 7.2 8H5.6c.6 1.4 1.7 2.9 2.9 4.4l-2.4 2.4c-.3.4-.7.8-1.1 1.2l1 1 1.2-1.2c.8-.8 1.6-1.5 2.3-2.3.8.9 1.7 1.7 2.5 2.5l.6-1.5c-.7-.6-1.4-1.3-2.1-2z"})});(0,t.addFilter)("blocks.registerBlockType","occ/rather-simple-polylang-free-extras",function(e,l){return["core/widget-area","core/legacy-widget","occ/rather-simple-polylang-language-switcher"].includes(l)?e:{...e,attributes:{...e.attributes,pll_lang:{type:"string",default:""}}}});const d=(0,a.createHigherOrderComponent)(e=>t=>{if(["core/widget-area","core/legacy-widget","occ/rather-simple-polylang-language-switcher"].includes(t.name))return(0,p.jsx)(e,{...t});const{attributes:a,setAttributes:i}=t,[s,d]=(0,n.useState)([]),[w,u]=(0,n.useState)(!0);(0,n.useEffect)(()=>{c()({path:"/pll/v1/languages"}).then(e=>{const l=e.map(e=>({label:e.name,value:e.slug,flag:e.flag_url}));d(l),u(!1)}).catch(()=>{u(!1)})},[]);const h=s.find(e=>e.value===a.pll_lang);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(e,{...t},"edit"),t.isSelected&&(0,p.jsx)(r.BlockControls,{group:"other",children:w?(0,p.jsx)(o.Spinner,{}):(0,p.jsx)(o.ToolbarDropdownMenu,{icon:h?.flag?(0,p.jsx)("img",{src:h.flag,alt:h.label,style:{width:"23px",height:"auto",padding:"2px",objectFit:"cover"}}):g,label:(0,l.__)("Select language","rather-simple-polylang-free-extras"),controls:[{title:(0,l.__)("All languages","rather-simple-polylang-free-extras"),icon:g,onClick:()=>i({pll_lang:void 0}),isActive:!a.pll_lang},...s.map(e=>({title:e.label,icon:(0,p.jsx)("img",{src:e.flag,alt:e.label,style:{width:"23px",height:"auto",padding:"2px",display:"block"}}),onClick:()=>i({pll_lang:e.value}),isActive:a.pll_lang===e.value}))]})})]})},"addLanguageSelectControl");(0,t.addFilter)("editor.BlockEdit","occ/rather-simple-polylang-free-extras",d)})();